<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #{{ order.id }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v={{ range(1, 10000) | random }}">
    <style>
        .btn-print { background-color: #6610f2; color: white; text-decoration: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; display: inline-block; margin-top: 10px; }
        .btn-print:hover { background-color: #520dc2; }
        .customer-info-box { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #eee; }
        .customer-info-box h3 { margin-top: 0; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
        .info-grid { display: grid; grid-template-columns: auto 1fr; gap: 10px; }
        .info-label { font-weight: bold; color: #555; }
    </style>
</head>
<body>
    <header>
        <h1>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h1>
        <nav>
            <a href="{{ url_for('orders') }}">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</a>
        </nav>
    </header>
    <main>
        <div style="text-align: right; margin-bottom: 20px;">
            <a href="{{ url_for('print_receipt', order_id=order.id) }}" target="_blank" class="btn-print">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (‡∏†‡∏≤‡∏©‡∏≤‡∏•‡∏≤‡∏ß)</a>
        </div>

        <div class="order-info-box">
            <div class="order-header">
                <h2>‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #{{ order.id }}</h2>
                <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> {{ order.order_date.strftime('%d/%m/%Y %H:%M:%S') }}</p>
            </div>
            <div class="order-statuses">
                <div class="status-item">
                    <span>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢:</span>
                    <span class="status-badge status-{{ order.payment_status|lower }}">{{ order.payment_status }}</span>
                </div>
                <div class="status-item">
                    <span>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå:</span>
                    <span class="status-badge status-{{ order.order_status|lower }}">{{ order.order_status }}</span>
                </div>
            </div>
        </div>

        <div class="customer-info-box">
            <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</h3>
            <div class="info-grid">
                <span class="info-label">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</span> <span>{{ order.customer_name or '-' }}</span>
                <span class="info-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</span> <span>{{ order.customer_phone or '-' }}</span>
                <span class="info-label">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</span> <span>{{ order.customer_address or '-' }}</span>
                <span class="info-label">‡∏™‡∏≤‡∏Ç‡∏≤:</span> <span>{{ order.destination_branch or '-' }}</span>
                <span class="info-label">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á:</span> <span>{{ order.transport_company or '-' }}</span>
                <span class="info-label">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</span> <span>{{ order.payment_method or '-' }}</span>
            </div>
        </div>

        <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠</h3>
        <table class="items-table">
            <thead>
                <tr>
                    <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                    <th>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                    <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                    <th>‡∏£‡∏ß‡∏°</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items %}
                    <tr>
                        <td>{{ item.product_name }}</td>
                        <td>LAK {{ "{:,.2f}".format(item.price_at_purchase) }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>LAK {{ "{:,.2f}".format(item.price_at_purchase * item.quantity) }}</td>
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr class="total-row">
                    <td colspan="3" style="text-align: right;">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</td>
                    <td class="price-cell">LAK {{ "{:,.2f}".format(order.total_price) }}</td>
                </tr>
            </tfoot>
        </table>
    </main>
    <footer>
        <p>&copy; 2023 My POS System</p>
    </footer>
</body>
</html>